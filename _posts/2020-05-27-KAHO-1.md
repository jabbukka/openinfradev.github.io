---
title: KAHO PoC - 1. Helm Operator
author: 김에스더
author-email: esther.k@sk.com
description: KAHO PoC 내용을 공유합니다.
date:   2020-05-27 11:00:00 +0900
img: taco_logo_circle.jpg
---
<p>by 김에스더(<a href="mailto:esther.k@sk.com">esther.k@sk.com</a>)</p>

안녕하세요. SKTelecom 개발자 김에스더입니다.  
이번 포스트에서는 <b><span style="color:#035aa6;">Kubernetes 기반의 Helm Chart 배포 파이프라인 PoC</span></b>인 KAHO Project에 대해 공유드리고자 합니다.

# 서론
KAHO Project가 시작된 배경에 대해 설명드리면,  
TACO Project에서는 여러 개의 Helm Chart의 Value값을 재정의하고  
Chart를 Grouping하여 배포하기 위해 <b><span style="color:#ec823a;">Armada</span></b>라는 툴을 사용하고 있습니다.  


배포해야하는 Helm Chart가 많아질수록 Helm Chart를 각각 배포하기 어렵고,  
<u>Helm chart간의 dependency</u>를 관리하기도 매우 어렵습니다.  
저희는 총 <b>27개</b>에 달하는 Helm Chart를 배포하고 관리해야하기 위해 Armada를 사용하고 있었습니다.  
사용 예제는 다음과 같습니다.  
<u>manifest.yaml 예제 </u>
```
Armara-manifest.yaml
schema: armada/Chart/v1
metadata:
  schema: metadata/Document/v1
  name: elasticsearch
data:
  chart_name: elasticsearch
  release: elasticsearch
  namespace: lma
  values:
    a: b
---
schema: armada/ChartGroup/v1
metadata:
  schema: metadata/Document/v1
  name: logging-infra
data:
  description: "Logging Infrastructure"
  sequenced: False
  chart_group:
  - elasticsearch
  - fluentbit
---
schema: armada/Manifest/v1
metadata:
  schema: metadata/Document/v1
  name: single-manifest
  chart_groups:
  - logging-infra
```

Armada는 

Armada 소스 코드 및 CLI는 https://github.com/airshipit/armada 이곳에서 확인하실 수 있으며, 

## KAHO란?
<b>Kustomize</b>와 <b>Argo, Helm Operator</b> 의 약자를 따서 KAHO라고 이름을 지었습니다.  
위 3개의 프로젝트들의 역할은 아래와 같습니다.  
* Kustomize 
  - Yaml 파일을 문서화하고 
* Helm Operator
* 
 